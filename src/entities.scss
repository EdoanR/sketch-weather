
@mixin entity($width, $height, $bottom: 0px) {
    position: absolute;
    background-image: linear-gradient(to left, red, blue);
    background-repeat: no-repeat;
    background-position: bottom right;
    background-size: 100% 100%;
    width: $width;
    height: $height;
    bottom: $bottom;
    right: -$width;
    display: none;
}

@mixin move($speed: 1) {
    animation: move calc(5s / $speed) linear forwards;
    display: block;
}

@mixin spritesheet-anim($sprites, $frames, $time: 1s, $loop: false) {
    background-image: $sprites;
    background-size: calc(100% * $frames) 100%;

    animation: sprite-anim;
    animation-duration: $time;
    @if $loop {
        animation-iteration-count: infinite;
    } @else {
        animation-iteration-count: 1;
        animation-fill-mode: forwards;
    }
    animation-timing-function: steps(calc($frames - 1));

    @keyframes sprite-anim {
        from { background-position: 0%; }
        to { background-position: 100%; }
    }
}

.fade {
    transition: opacity 1s ease-in-out;
    opacity: 0;
}

.car {
    @include entity(133px, 75px);
    background-image: url('./assets/images/entities/car.gif');

    &.ice-cream-truck {
        @include entity(133px, 96px);
        background-image: url('./assets/images/entities/ice_cream_truck.gif');
    }

    &.move {
        @include move(1);
    }
}

.person {
    @include entity(42px, 56px, 38px);
    background-image: url('./assets/images/entities/person.gif');

    &.person-sunny {
        background-image: url('./assets/images/entities/person_sunny.gif');
    }

    &.person-cold {
        @include entity(42px, 56px, 38px);
        background-image: url('./assets/images/entities/person_cold.gif');
    }

    &.person-rain {
        @include entity(50px, 71px, 38px);
        background-image: url('./assets/images/entities/person_rain.gif');
    }

    &.person-cold-rain {
        @include entity(51px, 69px, 38px);
        background-image: url('./assets/images/entities/person_cold_rain.gif');
    }

    &.move {
        @include move(0.5);
    }
}

.bird {
    @include entity(25px, 25px, 124px);
    background-image: url('./assets/images/bird-thicc.gif');

    &.owl {
        @include entity(30px, 30px, 124px);
        background-image: url('./assets/images/entities/owl.gif');

        &.move {
            @include move(0.5);
        }
    }

    &.move {
        @include move(0.65);
    }
}

.bike {
    @include entity(66px, 66px, 21px);
    background-image: url('./assets/images/entities/bike.gif');

    &.bike-girl {
        background-image: url('./assets/images/entities/bike_girl.gif');
    }

    &.bike-cold {
        background-image: url('./assets/images/entities/bike_cold.gif');
    }

    &.move {
        @include move(0.85);
    }
}

.tree {
    background-image: url('./assets/images/tree.gif');
    background-size: 100% 100%;
    position: absolute;
    top: 51px;
    left: 239px;
    width: 65px;
    height: 65px;
}

.collectable {
    cursor: pointer;
}

.collected {
    filter: drop-shadow(0 0 1.5px yellow);
}

.particle {
    position: absolute;
    width: 120px;
    height: 120px;
    pointer-events: none;

    @include spritesheet-anim(url('../src/assets/images/particles-sprites.png'), 4, 0.2s)
}

@keyframes move {
    100% {
        right: 100%;
    }
}