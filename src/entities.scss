
@mixin entity($width, $height, $bottom: 0px) {
    position: absolute;
    background-image: linear-gradient(to left, red, blue);
    background-repeat: no-repeat;
    background-position: bottom right;
    background-size: 100% 100%;
    transition: transform 0.1s ease-out;
    width: $width;
    height: $height;
    bottom: $bottom;
    right: -$width;
    display: none;

    &.pop-entity {
        transform: scale(1.25);
    }
}

@mixin move($speed: 1) {
    animation: move calc(5s / $speed) linear forwards;
    display: block;
}

@mixin spritesheet-anim($sprites, $frames, $time: 1s, $loop: false) {
    background-image: $sprites;
    background-size: calc(100% * $frames) 100%;

    animation: sprite-anim;
    animation-duration: $time;
    @if $loop {
        animation-iteration-count: infinite;
    } @else {
        animation-iteration-count: 1;
        animation-fill-mode: forwards;
    }
    animation-timing-function: steps(calc($frames - 1));

    @keyframes sprite-anim {
        from { background-position: 0%; }
        to { background-position: 100%; }
    }
}

.fade {
    transition: opacity 1s ease-in-out;
    opacity: 0;
}

.car {
    @include entity(133px, 75px);
    background-image: url('../public/images/entities/animated/car.gif');
    z-index: 9;

    &.ice-cream-truck {
        @include entity(133px, 96px);
        background-image: url('../public/images/entities/animated/ice_cream_truck.gif');
    }

    &.move {
        @include move(1);
    }
}

.person {
    @include entity(42px, 56px, 38px);
    background-image: url('../public/images/entities/animated/person.gif');
    z-index: 7;

    &.person-sunny {
        background-image: url('../public/images/entities/animated/person_sunny.gif');
    }

    &.person-cold {
        @include entity(42px, 56px, 38px);
        background-image: url('../public/images/entities/animated/person_cold.gif');
    }

    &.person-rain {
        @include entity(50px, 71px, 38px);
        background-image: url('../public/images/entities/animated/person_rain.gif');
    }

    &.person-cold-rain {
        @include entity(51px, 69px, 38px);
        background-image: url('../public/images/entities/animated/person_cold_rain.gif');
    }

    &.move {
        @include move(0.5);
    }
}

.bird {
    @include entity(25px, 25px, 124px);
    background-image: url('../public/images/entities/animated/bird.gif');
    z-index: 6;

    &.owl {
        @include entity(30px, 30px, 124px);
        background-image: url('../public/images/entities/animated/owl.gif');
    }

    &.move {
        @include move(0.65);
    }
}

.bike {
    @include entity(66px, 66px, 21px);
    background-image: url('../public/images/entities/animated/bike.gif');
    z-index: 8;

    &.bike-girl {
        background-image: url('../public/images/entities/animated/bike_girl.gif');
    }

    &.bike-cold {
        background-image: url('../public/images/entities/animated/bike_cold.gif');
    }

    &.move {
        @include move(0.85);
    }
}

// max y: bottom = 192px;
// min y: bottom = 43px;
.sun-moon {
    width: 30px;
    height: 30px;
    position: absolute;
    bottom: 192px;
    left: 94px;
    background-position: center;
    background-size: 100% 100%;
    z-index: 4;
    transition: bottom 1s ease-in-out;

    &.sun {
        background-image: url('../public/images/entities/animated/sun.gif');
    } 

    &.moon {
        background-image: url('../public/images/entities/animated/moon.gif');
    }
}

.collectable {
    cursor: pointer;
}

.weather-card .collected {
    pointer-events: none;
    filter: sepia(0.5) hue-rotate(22deg) brightness(1.2);
}

.particle {
    position: absolute;
    width: 120px;
    height: 120px;
    pointer-events: none;
    z-index: 11;

    @include spritesheet-anim(url('../src/assets/images/particles-sprites.png'), 4, 0.2s)
}

@keyframes move {
    100% {
        right: 100%;
    }
}